Object subclass: #Cliente	instanceVariableNames: 'ic nombre apellido dni numero plan numerosGratis llamadasRealizadas'	classVariableNames: ''	poolDictionaries: ''	category: 'TPEjemplo'!!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:13'!duracionLlamadas^llamadasRealizadas inject: 0 into: [ :suma :llamada | suma + llamada duracion ].! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:40'!sos: icBuscado^ic = icBuscado.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 12:08'!llamarA: clienteDestino durante: minutos^llamadasRealizadas add: (Llamada newDe: self para: clienteDestino durante: minutos).! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:00'!datosRelevantes^{ nombre. apellido. dni. numero. plan nombre. }.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:21'!calcularCostoLlamadas^plan calcularCostoLlamadasDe: self.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:39'!numero^numero.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:35'!tenesGratisA: clienteDestino^numerosGratis includes: (clienteDestino numero).! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:39'!llamadasRealizadas^llamadasRealizadas.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:59'!inicializarIc: icInicio nombre: nombreInicio apellido: apellidoInicio dni: dniInicio numero: numeroInicio plan: planInicionumerosGratis := OrderedCollection new.llamadasRealizadas := OrderedCollection new.ic := icInicio.nombre := nombreInicio.apellido := apellidoInicio.dni := dniInicio.numero := numeroInicio.plan := planInicio.! !!Cliente methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 12:07'!agregarNumeroGratis: numeroGratis((plan cantidadNumerosGratis) > (numerosGratis size)) ifTrue: [ ^numerosGratis add: numeroGratis ].^self error: 'No puede agregar más números gratis'.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Cliente class	instanceVariableNames: ''!!Cliente class methodsFor: 'instance creation' stamp: 'Emiliano 9/13/2017 10:53'!newIc: ic nombre: nombre apellido: apellido dni: dni numero: numero plan: plan^super new inicializarIc: ic nombre: nombre apellido: apellido dni: dni numero: numero plan: plan.! !Object subclass: #Gestor	instanceVariableNames: 'clientes planes'	classVariableNames: ''	poolDictionaries: ''	category: 'TPEjemplo'!!Gestor methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:20'!costoLlamadas: ic^(self buscarCliente: ic) calcularCostoLlamadas.! !!Gestor methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 11:53'!buscarCliente: ic^clientes detect: [ :c | c sos: ic. ] ifNone: [ ^self error: 'No se encontró al cliente buscado' ]! !!Gestor methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 11:58'!agregarA: ic numeroGratis: numeroGratis^(self buscarCliente: ic) agregarNumeroGratis: numeroGratis.! !!Gestor methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:51'!inicializarclientes := OrderedCollection new.planes := OrderedCollection new.! !!Gestor methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:05'!llamadas: ic^(self buscarCliente: ic) duracionLlamadas.! !!Gestor methodsFor: 'as yet unclassified' stamp: 'Emiliano 9/12/2017 11:59'!cliente: ic^(self buscarCliente: ic) datosRelevantes.! !!Gestor methodsFor: 'as yet unclassified' stamp: 'Emiliano 9/13/2017 12:03'!agregarPlan: plan planes add: plan.! !!Gestor methodsFor: 'as yet unclassified' stamp: 'Emiliano 9/13/2017 12:03'!agregarCliente: clienteclientes add: cliente.! !!Gestor methodsFor: 'as yet unclassified' stamp: 'Emiliano 9/12/2017 11:32'!crearLlamada: icOrig dest: icDest duracion: minutos| clienteOrigen clienteDestino |clienteOrigen := self buscarCliente: icOrig.clienteDestino := self buscarCliente: icDest.^clienteOrigen llamarA: clienteDestino  durante: minutos.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Gestor class	instanceVariableNames: ''!!Gestor class methodsFor: 'instance creation' stamp: 'Emiliano 9/13/2017 10:51'!new^super new inicializar.! !Object subclass: #Llamada	instanceVariableNames: 'clienteOrigen clienteReceptor duracion'	classVariableNames: ''	poolDictionaries: ''	category: 'TPEjemplo'!!Llamada methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:12'!duracion^duracion.! !!Llamada methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:38'!destino^clienteReceptor.! !!Llamada methodsFor: 'as yet unclassified' stamp: 'Emiliano 9/12/2017 11:38'!inicializarDe: clienteO para: clienteD durante: minutosclienteOrigen := clienteO.clienteReceptor := clienteD.duracion := minutos.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Llamada class	instanceVariableNames: ''!!Llamada class methodsFor: 'instance creation' stamp: 'Emiliano 9/12/2017 11:37'!newDe: clienteO para: clienteD durante: minutos^super new inicializarDe: clienteO para: clienteD durante: minutos! !Object subclass: #Plan	instanceVariableNames: 'nombre costoDelMinuto minutosLibres cantidadNumerosGratis'	classVariableNames: ''	poolDictionaries: ''	category: 'TPEjemplo'!!Plan methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 10:42'!calcularCostoLlamadasDe: cliente|llamadasCobradas minutosCobrados|llamadasCobradas := (cliente llamadasRealizadas) reject: [ :llamada | cliente tenesGratisA: (llamada destino) ].minutosCobrados := (llamadasCobradas inject: 0 into: [ :suma :llamada | suma + llamada duracion ]) - minutosLibres.(minutosCobrados <= 0)	ifTrue: [ ^0 ]								ifFalse: [ ^minutosCobrados * costoDelMinuto ].! !!Plan methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 11:52'!cantidadNumerosGratis^cantidadNumerosGratis.! !!Plan methodsFor: 'accessing' stamp: 'Emiliano 9/13/2017 11:02'!inicializarNombre: nombreInicio costoMin: costoDelMinutoInicio minLibres: minutosLibresInicio cantNumGratis: cantidadNumerosGratisInicionombre := nombreInicio.costoDelMinuto := costoDelMinutoInicio.minutosLibres := minutosLibresInicio.cantidadNumerosGratis := cantidadNumerosGratisInicio.! !!Plan methodsFor: 'accessing' stamp: 'Emiliano 9/12/2017 12:00'!nombre^nombre.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Plan class	instanceVariableNames: ''!!Plan class methodsFor: 'instance creation' stamp: 'Emiliano 9/13/2017 11:01'!newNombre: nombre costoMin: costoDelMinuto minLibres: minutosLibres cantNumGratis: cantidadNumerosGratis^super new inicializarNombre: nombre costoMin: costoDelMinuto minLibres: minutosLibres cantNumGratis: cantidadNumerosGratis.! !